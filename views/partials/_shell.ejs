<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TinyApp<%if(title){%><%=` - ${title}`%><%}%></title>
    <!-- Bootstrap CSS only -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1"
      crossorigin="anonymous"
    />
    <%- include(head) %>
  </head>
  <body>
    <%- include("_header") %> <%- include("_error") %>
    <div class="card">
      <div class="card-body"><%- include(body) %></div>
    </div>
    <!-- Bootstrap JS only -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW"
      crossorigin="anonymous"
    ></script>
    <script>
      function initFingerprintJS() {
        FingerprintJS.load().then((fp) => {
          let fpCookie = document.cookie
            .split("; ")
            .find((row) => row.startsWith("fp"))
            .split("=")[1];
          if (fpCookie) {
            fp.get().then((result) => {
              document.cookie = `fp=${result.visitorId}; path=/`;
            });
          }
          fpCookie = document.cookie
            .split("; ")
            .find((row) => row.startsWith("fp"))
            .split("=")[1];
          console.log(fpCookie);
        });
      }
    </script>
    <script
      async
      src="//cdn.jsdelivr.net/npm/@fingerprintjs/fingerprintjs@3/dist/fp.min.js"
      onload="initFingerprintJS()"
    ></script>
  </body>
</html>
