<script>
  function initFingerprintJS() {
    FingerprintJS.load()
    .then(fp => fp.get())
    .then(result => fetch(`/urls/<%-`${shortUrl}`%>/${result.visitorId}/track`))
    .then((result)=>{
      window.location.replace("<%-`${longUrl}`%>")
    })
    .catch((result)=>{
      window.location.replace("<%-`${longUrl}`%>")
    })}
</script>
<script
  async
  src="//cdn.jsdelivr.net/npm/@fingerprintjs/fingerprintjs@3/dist/fp.min.js"
  onload="initFingerprintJS()"
></script>
